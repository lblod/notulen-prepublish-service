steps:
  tests:
    image: semtech/mu-javascript-template:latest
    group: tests
    environment:
      NODE_ENV: 'development'
    commands:
      # complexer then it should be, should be f
      - mkdir -p /usr/src/app/app/node_modules && cp -r ./ /usr/src/app/app
      # merge package uses /app
      - cp -r ./ /app/
      - cd /usr/src/app
      - ./prepare-package-json.sh
      - cp -R /usr/src/app/helpers/mu /usr/src/app/app/node_modules/mu
      - ./transpile-sources.sh
      - cd /usr/src/dist/
      - npm install
      # npm run lint:js
      - npm run test
when:
  event:
    - pull_request
